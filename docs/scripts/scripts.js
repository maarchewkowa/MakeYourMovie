"use strict";angular.module("filmikApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","backand"]).config(["$routeProvider","BackandProvider",function(a,b){b.setAppName("makeyourmovie"),b.setAnonymousToken("fb4233db-62d8-4f02-a1ed-baaa240e0997"),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/player",{templateUrl:"views/player.html",controller:"PlayerCtrl",controllerAs:"player"}).when("/movie",{templateUrl:"views/movie.html",controller:"MovieCtrl",controllerAs:"movie"}).when("/music",{templateUrl:"views/music.html",controller:"MusicCtrl",controllerAs:"music"}).when("/effect",{templateUrl:"views/effect.html",controller:"EffectCtrl",controllerAs:"effect"}).otherwise({redirectTo:"/"})}]),angular.module("filmikApp").controller("MainCtrl",["$scope","$rootScope","$location","mediaService",function(a,b,c,d){b.selectedVideo=null,b.selectedMusic=null,b.selectedEffect=null,a.nextClick=function(){c.path("movie")},a.randomClick=function(){b.selectedVideo=d.movies[Math.floor(Math.random()*d.movies.length)],b.selectedMusic=d.music[Math.floor(Math.random()*d.music.length)],b.selectedEffect=d.effects[Math.floor(Math.random()*d.effects.length)],c.path("player")}}]),angular.module("filmikApp").controller("PlayerCtrl",["$scope","$rootScope","$location","Backand",function(a,b,c,d){a.selectedVideo=b.selectedVideo,a.selectedEffect=b.selectedEffect,a.selectedMusic=b.selectedMusic,a.goBackToMovie=function(){c.path("movie")},a.goBackToEffect=function(){c.path("effect")},a.goBackToMusic=function(){c.path("music")}}]),angular.module("filmikApp").controller("MovieCtrl",["$scope","$rootScope","$location","$filter","mediaService",function(a,b,c,d,e){a.videos=e.movies,null===b.selectedVideo?a.selectedVideo="":a.selectedVideo=b.selectedVideo.id,a.nextClick=function(){b.selectedVideo=d("filter")(a.videos,{id:a.selectedVideo})[0],c.path("effect")}}]),angular.module("filmikApp").controller("MusicCtrl",["$scope","$rootScope","$location","$filter","mediaService",function(a,b,c,d,e){a.musics=e.music,null===b.selectedMusic?a.selectedMusic="":a.selectedMusic=b.selectedMusic.id,a.nextClick=function(){b.selectedMusic=d("filter")(a.musics,{id:a.selectedMusic})[0],c.path("player")}}]),angular.module("filmikApp").controller("EffectCtrl",["$scope","$rootScope","$location","$filter","mediaService",function(a,b,c,d,e){a.effects=e.effects,null===b.selectedEffect?a.selectedEffect="":a.selectedEffect=b.selectedEffect.id,a.nextClick=function(){b.selectedEffect=d("filter")(a.effects,{id:a.selectedEffect})[0],c.path("music")}}]),angular.module("filmikApp").directive("p5video",["$window",function(a){return{restrict:"E",scope:{video:"=",effect:"=",music:"="},link:function(b,c){var d=a.p5,e=null,f=function(){i(),e=new d(h,c[0])},g=function(){$("#player").uncinema({elements:[$("#p5_loading"),$("#player")]})},h=function(a){var c,d;a.preload=function(){$("#player").cinema({elements:[$("#p5_loading"),$("#player")]}),d=a.loadSound("sounds/"+b.music.fileName)},a.setup=function(){c=a.createVideo(["videos/"+b.video.fileName]),$(document).bind("click",g),a.createCanvas(700,394),c.size(700,394),c.hide(),c.loop(),d.loop()},a.draw=function(){b.effect.apply(a,c)}},i=function(){e&&(e.remove(),e=null),$(document).unbind("click",g)};f(),b.$on("$destroy",function(){i()})}}}]),angular.module("filmikApp").service("mediaService",function(){this.movies=[{id:1,author:"BRoll.io (CC0)",fileName:"342466734 - BRoll.io - CC0.mp4",thumbnailName:"kawa.jpg",name:"Kawa"},{id:2,author:"lifeofvids (CC0)",fileName:"342933669 - lifeofvids - CC0.mp4",thumbnailName:"kaluza.jpg",name:"Kałuża"},{id:3,author:"Life-Of-Vids (CC0)",fileName:"343378693 - Life-Of-Vids - CC0.mp4",thumbnailName:"komputer.jpg",name:"Komputer"},{id:4,author:"Oak & Rumble (CC0)",fileName:"343488880 - Oak & Rumble - CC0.mp4",thumbnailName:"las.jpg",name:"Las"},{id:5,author:"Distill (CC0)",fileName:"343637036 - Distill - CC0.mp4",thumbnailName:"bar.jpg",name:"Bar"},{id:6,author:"Coverr (CC0)",fileName:"385124896 - Coverr - CC0.mp4",thumbnailName:"zarowka.jpg",name:"Żarówka"},{id:7,author:"FreeWorld (CC0)",fileName:"Autumn - 1989 - FreeWorld - CC0.mp4",thumbnailName:"kwiaty.jpg",name:"Kwiaty"},{id:8,author:"Myriams-Fotos (CC0)",fileName:"Blueberries - 3924 - Myriams-Fotos - CC0.mp4",thumbnailName:"jagody.jpg",name:"Jagody"},{id:9,author:"keith_12345 (CC0)",fileName:"People - 4714 - keith_12345 - CC0.mp4",thumbnailName:"plaza.jpg",name:"Plaża"},{id:10,author:"KlausHausmann (CC0)",fileName:"Raspberries - 3777 - KlausHausmann - CC0.mp4",thumbnailName:"malina.jpg",name:"Malina"},{id:11,author:"BenjaminNelan (CC0)",fileName:"Snail - 639 - BenjaminNelan - CC0.mp4",thumbnailName:"slimak.jpg",name:"Ślimak"},{id:12,author:"Life-Of-Vids (CC0)",fileName:"Water - 990 - Life-Of-Vids - CC0.mp4",thumbnailName:"woda.jpg",name:"Woda"}],this.music=[{id:1,name:"Country",fileName:"Daisy_Dukes.mp3",author:"Silent Partner"},{id:2,name:"Funky",fileName:"Feel_The_Funk.mp3",author:"Jimmy Fontanez / Media Right Productions"},{id:3,name:"Hip-hop",fileName:"Butchers.mp3",author:"Silent Partner"},{id:4,name:"Szczęśliwa",fileName:"Morning_Stroll.mp3",author:"Josh Kirsch / Media Right Productions"},{id:5,name:"Dramatyczna",fileName:"Black_Highway.mp3",author:"JR Tundra"},{id:6,name:"Inspirująca",fileName:"Believer.mp3",author:"Silent Partner"},{id:7,name:"Mroczna",fileName:"Prelude_No_15.mp3",author:"Chris Zabriskie"},{id:8,name:"Romantyczna",fileName:"The_Bluest_Star.mp3",author:"The 126ers"},{id:9,name:"Metal",fileName:"March_On.mp3",author:"Ethan Meixsell"},{id:10,name:"Spokojna",fileName:"Where_I_am_From.mp3",author:"Topher Mohr and Alex Elena"},{id:11,name:"Skoczna",fileName:"If_I_Had_a_Chicken.mp3",author:"Kevin MacLeod"},{id:12,name:"R&B",fileName:"All_Aboard.mp3",author:"Silent Partner"},{id:13,name:"Smutna",fileName:"Days_Are_Long.mp3",author:"Silent Partner"},{id:14,name:"Jazz",fileName:"Jazz_In_Paris.mp3",author:"Media Right Productions"},{id:15,name:"Relaksacyjna",fileName:"North.mp3",author:"Silent Partner"},{id:16,name:"Ambient",fileName:"New_Land.mp3",author:"ALBIS"},{id:17,name:"Taneczna",fileName:"Universal.mp3",author:"Vibe Tracks"},{id:18,name:"Reggae",fileName:"Dub_Spirit.mp3",author:"Jingle Punks"},{id:19,name:"Klasyczna",fileName:"Eternal_Hope.mp3",author:"Kevin MacLeod"},{id:20,name:"Bitewna",fileName:"Intended_Force.mp3",author:"Kevin MacLeod"}],this.effects=[{id:1,name:"Brak",apply:function(a,b){a.image(b,0,0)}},{id:2,name:"Czarno-białe",apply:function(a,b){a.image(b,0,0),a.filter("GRAY")}},{id:3,name:"Sepia",apply:function(a,b){a.image(b,0,0);var c=a.color("rgba(112, 66, 20, 0.4)");a.fill(c),a.stroke(0),a.rect(0,0,b.width,b.height)}},{id:4,name:"Kinowy",thumbnailName:"yeoman2.png",apply:function(a,b){a.image(b,0,0);var c=a.color("rgba(9, 56, 66, 0.4)");a.fill(c),a.stroke(0),a.rect(0,0,b.width,b.height),a.fill(0),a.rect(0,0,b.width,47),a.rect(0,347,b.width,47)}},{id:5,name:"Niebieski",apply:function(a,b){a.image(b,0,0);var c=a.color("rgba(0, 0, 255, 0.2)");a.fill(c),a.stroke(0),a.rect(0,0,b.width,b.height)}},{id:6,name:"Czerwony",apply:function(a,b){a.image(b,0,0);var c=a.color("rgba(255, 0, 0, 0.15)");a.fill(c),a.stroke(0),a.rect(0,0,b.width,b.height)}},{id:7,name:"Zielony",apply:function(a,b){a.image(b,0,0);var c=a.color("rgba(0, 255, 0, 0.15)");a.fill(c),a.stroke(0),a.rect(0,0,b.width,b.height)}}]}),jQuery&&function(a){a.extend(a.fn,{cinema:function(b){var c=a(this),d=a("body"),e=['<div class="jquery-cinema">',"</div>"];if(d.prepend(e.join("")),a(".jquery-cinema").css({height:d.height()+"px",position:"absolute",top:"0px",left:"0px",width:"100%","z-index":"4000","background-color":"rgb(0, 0, 0)",opacity:"0.9",display:"none"}),a(".jquery-cinema").fadeIn(500),c.data("cinemaselfposition",c.css("position")),c.data("cinemaselfzindex",c.css("z-index")),c.css({position:"relative","z-index":"5000"}),a(".jquery-cinema").click(function(){var b=a(".jquery-cinema").data("cinemaelements");if(null!=b)for(var d=0,e=b.length;e>d;d++){var f=b[d];f.css({"z-index":f.data("cinemazindex"),position:f.data("cinemaposition")})}a(this).fadeOut(500,function(){a(this).remove()}),c.css({position:c.data("cinemaselfposition"),"z-index":c.data("cinemaselfzindex")})}),null!=b&&null!=b.elements){a(".jquery-cinema").data("cinemaelements",b.elements);for(var f=0,g=b.elements.length;g>f;f++){var h=b.elements[f];h.data("cinemazindex",h.css("z-index")),h.data("cinemaposition",h.css("position")),h.css({"z-index":"9999",position:"relative"})}}},uncinema:function(){var b=a(".jquery-cinema").data("cinemalements");if(null!=b)for(var c=0,d=b.length;d>c;c++){var e=b[c];e.css({"z-index":e.data("cinemazindex"),position:e.data("cinemaposition")})}a(".jquery-cinema").fadeOut(500,function(){a(this).remove()}),a(this).css({position:a(this).data("cinemaselfposition"),"z-index":a(this).data("cinemaselfzindex")})}})}(jQuery),angular.module("filmikApp").run(["$templateCache",function(a){a.put("views/effect.html",'<h4>Efekt</h4> <div class="row"> <div class="col-sm-3" data-ng-repeat="effect in effects | orderBy: \'name\'"> <label> <input name="effectRadio" type="radio" ng-value="{{effect.id}}" ng-model="$parent.selectedEffect"> {{effect.name}} </label> </div> </div> <div class="row marketing"> <div class="col-md-12"> <button class="btn btn-lg btn-success btn-block" ng-click="nextClick()" ng-disabled="selectedEffect == \'\'"> <span class="glyphicon glyphicon-arrow-right"></span> Dalej </button> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> </div> <div class="row marketing"> <div class="col-md-6"> <button class="btn btn-lg btn-success btn-block" ng-click="nextClick()"> <span class="glyphicon glyphicon-arrow-right"></span>&nbsp;Rozpocznij </button> </div> <div class="col-md-6"> <button class="btn btn-lg btn-info btn-block" ng-click="randomClick()"> <span class="glyphicon glyphicon-random"></span>&nbsp;&nbsp;Losuj </button> </div> </div>'),a.put("views/movie.html",'<h4>Wideo</h4> <label data-ng-repeat="video in videos"> <input name="movieRadio" type="radio" ng-value="{{video.id}}" ng-model="$parent.selectedVideo"> <img src="images/movies/{{video.thumbnailName}}"> </label> <div class="row marketing"> <div class="col-md-12"> <button class="btn btn-lg btn-success btn-block" ng-click="nextClick()" ng-disabled="selectedVideo == \'\'"> <span class="glyphicon glyphicon-arrow-right"></span> Dalej </button> </div> </div>'),a.put("views/music.html",'<h4>Muzyka</h4> <div class="row"> <div class="col-sm-3" data-ng-repeat="music in musics | orderBy: \'name\'"> <label> <input name="musicRadio" type="radio" ng-value="{{music.id}}" ng-model="$parent.selectedMusic"> <span class="glyphicon glyphicon-play"></span> {{music.name}} </label> </div> </div> <div class="row marketing"> <div class="col-md-12"> <button class="btn btn-lg btn-success btn-block" ng-click="nextClick()" ng-disabled="selectedMusic == \'\'"> <span class="glyphicon glyphicon-arrow-right"></span> Dalej </button> </div> </div>'),a.put("views/player.html",'<!--<video controls>\r\n  <source src="videos/{{selectedVideo.fileName}}" type="video/mp4">\r\n  Your browser does not support the video tag.\r\n</video>--> <div class="row"> <div class="col-md-12"> <p5video id="player" video="selectedVideo" effect="selectedEffect" music="selectedMusic"> </p5video> <div id="p5_loading" class="loadingclass"> <span><i class="glyphicon glyphicon-repeat gly-spin"></i><br> Ładowanie...</span> </div> </div> </div> <div class="row" style="text-align: center; margin-top: 50px"> <div class="col-sm-4"> <h4>Wideo</h4> {{selectedVideo.name}}<br> Autor: {{selectedVideo.author}} <br><br> <button class="btn btn-sm btn-primary" ng-click="goBackToMovie()">Zmień</button> </div> <div class="col-sm-4"> <h4>Efekt</h4> {{selectedEffect.name}}<br> <br><br> <button class="btn btn-sm btn-primary" ng-click="goBackToEffect()">Zmień</button> </div> <div class="col-sm-4"> <h4>Muzyka</h4> {{selectedMusic.name}}<br> Autor: {{selectedMusic.author}} <br><br> <button class="btn btn-sm btn-primary" ng-click="goBackToMusic()">Zmień</button> </div> </div> <div class="row marketing"> <div class="col-md-12"> <a class="btn btn-lg btn-info btn-block" href="#/"> <span class="glyphicon glyphicon-arrow-left"></span> Stwórz nowy film </a> </div> </div>')}]);